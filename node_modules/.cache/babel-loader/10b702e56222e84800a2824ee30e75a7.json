{"ast":null,"code":"import classes from\"./detailProduct.module.css\";import{useSelector}from\"react-redux\";import Products from\"../homePage/Products\";import{editPrice}from\"../../store/function\";import{useNavigate}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{cartActions}from\"../../store/cartStore\";import{useRef}from\"react\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DetailProduct=function DetailProduct(props){var data=useSelector(function(state){return state.data.currentData;});//lay data tu store\nvar userActive=useSelector(function(state){return state.currentUser.email;});// lay user hien tai\nvar cart=useSelector(function(state){return state.cart;});//lay cart tu store\nvar navigate=useNavigate();var dispatch=useDispatch();var quantityInputRef=useRef();var product=data.find(function(ele){return ele._id.$oid===props.id;});//tim ra product dua theo id san pham da duoc click lay tu component cha\nvar related=data.filter(// loc cac san pham tuong tu category / khong lay san pham hien tai\nfunction(ele){return ele.category===product.category&&ele._id.$oid!==props.id;});var showDetailHandler=function showDetailHandler(index){//show detail san pham lien quan\nvar idDetail=related[index]._id.$oid;navigate(\"/detail/\".concat(idDetail));};var backToShopHandler=function backToShopHandler(e){// button quay lai shop\ne.preventDefault();navigate(\"/shop\");};//Xu ly du lieu add to cart\nvar addToCartHandler=function addToCartHandler(e){e.preventDefault();var enteredQuantityInputRef=quantityInputRef.current.value;// tao bien cart Detail chua thong tin cart\nvar cartDetail={id:product._id.$oid,image:product.img1,name:product.name,price:product.price,quantity:Number(enteredQuantityInputRef)};if(!userActive){//Neu chua dang nhap thi thong bao dang nhap\ntoast.warn(\"Login to continue !\");return false;}if(!!userActive){// neu da dang nhap thi add to cart\nif(cart.length===0){// neu gio hang chua co gi thi add vao\ndispatch(cartActions.addToCart(cartDetail));toast.success(\"Added\");}//neu nhu da co san pham trong gio hang thi thong bao, neu chua có mat hang do trong gio hang thi them vao\nif(cart.length>0){// neu da ton tai gio hang\nfor(var i=0;i<cart.length;i++){//neu da co san trong gio hang thi thong bao\nif(cart[i].id===props.id){toast.warning(\"You have \".concat(cart[i].name,\". Modify your quantity in your cart\"),{position:\"top-center\",autoClose:3000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});return-1;}}// duyet qua ma khong co thi them vao\ndispatch(cartActions.addToCart(cartDetail));toast.success(\"Added\");}}};return/*#__PURE__*/_jsxs(_Fragment,{children:[data.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.detailProduct,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.miniImg,children:[/*#__PURE__*/_jsx(\"img\",{src:product.img1}),/*#__PURE__*/_jsx(\"img\",{src:product.img2}),/*#__PURE__*/_jsx(\"img\",{src:product.img3}),/*#__PURE__*/_jsx(\"img\",{src:product.img4})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.imgMain,children:/*#__PURE__*/_jsx(\"img\",{src:product.img1})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.detailDescription,children:[/*#__PURE__*/_jsx(\"h1\",{children:product.name}),/*#__PURE__*/_jsx(\"h3\",{children:editPrice(product.price)}),/*#__PURE__*/_jsx(\"p\",{children:product.short_desc}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Category : \",product.category]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.formButton,children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",for:\"qty\",children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"input\",{ref:quantityInputRef,type:\"number\",name:\"qty\",id:\"qty\",min:\"1\",max:\"10\",step:\"1\",defaultValue:1})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addToCartHandler,children:\"Add to cart\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.middle,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"PRODUCT DESCRIPTION\"}),/*#__PURE__*/_jsx(\"p\",{className:classes.description,children:product.long_desc})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.bottom,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"RELATED PRODUCTS\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.products,children:related.length>0&&related.map(function(ele,index){return/*#__PURE__*/_jsx(Products,{item:ele//obj chua thong tin san pham\n,click:showDetailHandler//click show san pham\n,index:index//index de hien thi\n},index);})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.backToShopBtn,children:/*#__PURE__*/_jsx(\"button\",{onClick:backToShopHandler,children:\" Back To ShopPage\"})})]}),data.length===0&&/*#__PURE__*/_jsx(\"h1\",{children:\"Loading...\"}),/*#__PURE__*/_jsx(ToastContainer,{position:\"top-center\",autoClose:3000,hideProgressBar:false,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true,theme:\"light\"})]});};export default DetailProduct;","map":{"version":3,"names":["classes","useSelector","Products","editPrice","useNavigate","useDispatch","cartActions","useRef","ToastContainer","toast","DetailProduct","props","data","state","currentData","userActive","currentUser","email","cart","navigate","dispatch","quantityInputRef","product","find","ele","_id","$oid","id","related","filter","category","showDetailHandler","index","idDetail","backToShopHandler","e","preventDefault","addToCartHandler","enteredQuantityInputRef","current","value","cartDetail","image","img1","name","price","quantity","Number","warn","length","addToCart","success","i","warning","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","detailProduct","miniImg","img2","img3","img4","imgMain","detailDescription","short_desc","formButton","middle","description","long_desc","bottom","products","map","backToShopBtn"],"sources":["E:/UDEMY LAB/PROJECT/E-Commerce/src/components/detailPage/DetailProduct.js"],"sourcesContent":["import classes from \"./detailProduct.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Products from \"../homePage/Products\";\r\nimport { editPrice } from \"../../store/function\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { cartActions } from \"../../store/cartStore\";\r\nimport { useRef } from \"react\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst DetailProduct = (props) => {\r\n  const data = useSelector((state) => state.data.currentData); //lay data tu store\r\n  const userActive = useSelector((state) => state.currentUser.email); // lay user hien tai\r\n  const cart = useSelector((state) => state.cart); //lay cart tu store\r\n\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const quantityInputRef = useRef();\r\n\r\n  const product = data.find((ele) => ele._id.$oid === props.id); //tim ra product dua theo id san pham da duoc click lay tu component cha\r\n  const related = data.filter(\r\n    // loc cac san pham tuong tu category / khong lay san pham hien tai\r\n    (ele) => ele.category === product.category && ele._id.$oid !== props.id\r\n  );\r\n\r\n  const showDetailHandler = (index) => {\r\n    //show detail san pham lien quan\r\n    const idDetail = related[index]._id.$oid;\r\n    navigate(`/detail/${idDetail}`);\r\n  };\r\n\r\n  const backToShopHandler = (e) => {\r\n    // button quay lai shop\r\n    e.preventDefault();\r\n    navigate(\"/shop\");\r\n  };\r\n\r\n  //Xu ly du lieu add to cart\r\n  const addToCartHandler = (e) => {\r\n    e.preventDefault();\r\n    const enteredQuantityInputRef = quantityInputRef.current.value;\r\n    // tao bien cart Detail chua thong tin cart\r\n    const cartDetail = {\r\n      id: product._id.$oid,\r\n      image: product.img1,\r\n      name: product.name,\r\n      price: product.price,\r\n      quantity: Number(enteredQuantityInputRef),\r\n    };\r\n    if (!userActive) {\r\n      //Neu chua dang nhap thi thong bao dang nhap\r\n      toast.warn(\"Login to continue !\");\r\n      return false;\r\n    }\r\n    if (!!userActive) {\r\n      // neu da dang nhap thi add to cart\r\n      if (cart.length === 0) {\r\n        // neu gio hang chua co gi thi add vao\r\n        dispatch(cartActions.addToCart(cartDetail));\r\n        toast.success(`Added`);\r\n      }\r\n      //neu nhu da co san pham trong gio hang thi thong bao, neu chua có mat hang do trong gio hang thi them vao\r\n      if (cart.length > 0) {\r\n        // neu da ton tai gio hang\r\n        for (let i = 0; i < cart.length; i++) {\r\n          //neu da co san trong gio hang thi thong bao\r\n          if (cart[i].id === props.id) {\r\n            toast.warning(\r\n              `You have ${cart[i].name}. Modify your quantity in your cart`,\r\n              {\r\n                position: \"top-center\",\r\n                autoClose: 3000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n                theme: \"light\",\r\n              }\r\n            );\r\n            return -1;\r\n          }\r\n        }\r\n        // duyet qua ma khong co thi them vao\r\n        dispatch(cartActions.addToCart(cartDetail));\r\n        toast.success(`Added`);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {data.length > 0 && (\r\n        <div>\r\n          <div className={classes.detailProduct}>\r\n            {/* anh mini o ben trai  */}\r\n            <div className={classes.miniImg}>\r\n              <img src={product.img1}></img>\r\n              <img src={product.img2}></img>\r\n              <img src={product.img3}></img>\r\n              <img src={product.img4}></img>\r\n            </div>\r\n            {/* anh chinh o giua  */}\r\n            <div className={classes.imgMain}>\r\n              <img src={product.img1}></img>\r\n            </div>\r\n\r\n            {/* thanh phan hien thi mo ta san pham o ben phai*/}\r\n            <div className={classes.detailDescription}>\r\n              <h1>{product.name}</h1>\r\n              <h3>{editPrice(product.price)}</h3>\r\n              <p>{product.short_desc}</p>\r\n              <h3>Category : {product.category}</h3>\r\n              <div className={classes.formButton}>\r\n                {/* form de lay du lieu cho vao cart */}\r\n                <form>\r\n                  <label htmlFor=\"\" for=\"qty\">\r\n                    Quantity:\r\n                  </label>\r\n                  <input\r\n                    ref={quantityInputRef}\r\n                    type=\"number\"\r\n                    name=\"qty\"\r\n                    id=\"qty\"\r\n                    min=\"1\"\r\n                    max=\"10\"\r\n                    step=\"1\"\r\n                    defaultValue={1}\r\n                  />\r\n                </form>\r\n                <button onClick={addToCartHandler}>Add to cart</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* MIDDLE thanh phan mo ta cu the  */}\r\n          <div className={classes.middle}>\r\n            <span>Description</span>\r\n            <h3>PRODUCT DESCRIPTION</h3>\r\n            <p className={classes.description}>{product.long_desc}</p>\r\n          </div>\r\n\r\n          {/* BOTTOM gom cac san pham lien quan */}\r\n          <div className={classes.bottom}>\r\n            <h3>RELATED PRODUCTS</h3>\r\n            <div className={classes.products}>\r\n              {/* Neu co san pham lien quan thi hien thi ra man hinh  */}\r\n              {related.length > 0 &&\r\n                related.map((ele, index) => (\r\n                  <Products\r\n                    key={index}\r\n                    item={ele} //obj chua thong tin san pham\r\n                    click={showDetailHandler} //click show san pham\r\n                    index={index} //index de hien thi\r\n                  />\r\n                ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Button de quay lai trang shop */}\r\n          <div className={classes.backToShopBtn}>\r\n            <button onClick={backToShopHandler}> Back To ShopPage</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Luc moi tai trang, Component duoc render lan dau chua co du lieu thi hien thi Loading...  */}\r\n      {data.length === 0 && <h1>Loading...</h1>}\r\n      <ToastContainer\r\n        position=\"top-center\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n        theme=\"light\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DetailProduct;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}