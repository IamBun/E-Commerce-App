{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst cart = localStorage.getItem(\"cart\") //Tim trong localStorage, neu chua co thi tao cart la mang rong\n? JSON.parse(localStorage.getItem(\"cart\")) : [];\nconst cartSlice = createSlice({\n  name: \"cartSlice\",\n  initialState: cart,\n  reducers: {\n    addToCart(state, action) {\n      state.push(action.payload); // them san pham moi vao mang cart\n      localStorage.setItem(\"cart\", JSON.stringify(state)); //luu vao local storage\n    },\n\n    updateCart(state, action) {\n      for (let i = 0; i < state.length; i++) {\n        //kiem tra id san pham voi id cac san pham trong gio hang\n        if (state[i].id === action.payload.id) {\n          //tim san pham duoc update qua id, cap nhat quantity moi\n          state[i].quantity = action.payload.quantity;\n        }\n        //neu san pham do quantity=0 thi xoa khoi mang\n        if (state[i].quantity < 1) {\n          state.splice(i, 1);\n        }\n      }\n      localStorage.setItem(\"cart\", JSON.stringify(state)); //luu\n    },\n\n    deleteCart(state, action) {\n      //xoa san pham\n      for (let i = 0; i < state.length; i++) {\n        //kiem tra id san pham voi id cac san pham trong gio hang\n        if (state[i].id === action.payload.id) {\n          state.splice(i, 1); //xoa khoi mang\n        }\n      }\n\n      localStorage.setItem(\"cart\", JSON.stringify(state));\n    },\n    logoutCart(state) {\n      //xoa cart\n      state.splice(0, state.length); //xoa cart tu vi tri dau tien, xoa tat ca san pham, tra ve mang rong\n    }\n  }\n});\n\nexport const cartActions = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","cart","localStorage","getItem","JSON","parse","cartSlice","name","initialState","reducers","addToCart","state","action","push","payload","setItem","stringify","updateCart","i","length","id","quantity","splice","deleteCart","logoutCart","cartActions","actions","reducer"],"sources":["E:/UDEMY LAB/PROJECT/E-Commerce/src/store/cartStore.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst cart = localStorage.getItem(\"cart\") //Tim trong localStorage, neu chua co thi tao cart la mang rong\r\n  ? JSON.parse(localStorage.getItem(\"cart\"))\r\n  : [];\r\n\r\nconst cartSlice = createSlice({\r\n  name: \"cartSlice\",\r\n  initialState: cart,\r\n  reducers: {\r\n    addToCart(state, action) {\r\n      state.push(action.payload); // them san pham moi vao mang cart\r\n      localStorage.setItem(\"cart\", JSON.stringify(state)); //luu vao local storage\r\n    },\r\n    updateCart(state, action) {\r\n      for (let i = 0; i < state.length; i++) {\r\n        //kiem tra id san pham voi id cac san pham trong gio hang\r\n        if (state[i].id === action.payload.id) {\r\n          //tim san pham duoc update qua id, cap nhat quantity moi\r\n          state[i].quantity = action.payload.quantity;\r\n        }\r\n        //neu san pham do quantity=0 thi xoa khoi mang\r\n        if (state[i].quantity < 1) {\r\n          state.splice(i, 1);\r\n        }\r\n      }\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(state)); //luu\r\n    },\r\n    deleteCart(state, action) {\r\n      //xoa san pham\r\n      for (let i = 0; i < state.length; i++) {\r\n        //kiem tra id san pham voi id cac san pham trong gio hang\r\n        if (state[i].id === action.payload.id) {\r\n          state.splice(i, 1); //xoa khoi mang\r\n        }\r\n      }\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(state));\r\n    },\r\n\r\n    logoutCart(state) {\r\n      //xoa cart\r\n      state.splice(0, state.length); //xoa cart tu vi tri dau tien, xoa tat ca san pham, tra ve mang rong\r\n    },\r\n  },\r\n});\r\n\r\nexport const cartActions = cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;AAAA,EACtCC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,GACxC,EAAE;AAEN,MAAMG,SAAS,GAAGN,WAAW,CAAC;EAC5BO,IAAI,EAAE,WAAW;EACjBC,YAAY,EAAEP,IAAI;EAClBQ,QAAQ,EAAE;IACRC,SAAS,CAACC,KAAK,EAAEC,MAAM,EAAE;MACvBD,KAAK,CAACE,IAAI,CAACD,MAAM,CAACE,OAAO,CAAC,CAAC,CAAC;MAC5BZ,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEX,IAAI,CAACY,SAAS,CAACL,KAAK,CAAC,CAAC,CAAC,CAAC;IACvD,CAAC;;IACDM,UAAU,CAACN,KAAK,EAAEC,MAAM,EAAE;MACxB,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,KAAK,CAACQ,MAAM,EAAED,CAAC,EAAE,EAAE;QACrC;QACA,IAAIP,KAAK,CAACO,CAAC,CAAC,CAACE,EAAE,KAAKR,MAAM,CAACE,OAAO,CAACM,EAAE,EAAE;UACrC;UACAT,KAAK,CAACO,CAAC,CAAC,CAACG,QAAQ,GAAGT,MAAM,CAACE,OAAO,CAACO,QAAQ;QAC7C;QACA;QACA,IAAIV,KAAK,CAACO,CAAC,CAAC,CAACG,QAAQ,GAAG,CAAC,EAAE;UACzBV,KAAK,CAACW,MAAM,CAACJ,CAAC,EAAE,CAAC,CAAC;QACpB;MACF;MAEAhB,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEX,IAAI,CAACY,SAAS,CAACL,KAAK,CAAC,CAAC,CAAC,CAAC;IACvD,CAAC;;IACDY,UAAU,CAACZ,KAAK,EAAEC,MAAM,EAAE;MACxB;MACA,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,KAAK,CAACQ,MAAM,EAAED,CAAC,EAAE,EAAE;QACrC;QACA,IAAIP,KAAK,CAACO,CAAC,CAAC,CAACE,EAAE,KAAKR,MAAM,CAACE,OAAO,CAACM,EAAE,EAAE;UACrCT,KAAK,CAACW,MAAM,CAACJ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACtB;MACF;;MAEAhB,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEX,IAAI,CAACY,SAAS,CAACL,KAAK,CAAC,CAAC;IACrD,CAAC;IAEDa,UAAU,CAACb,KAAK,EAAE;MAChB;MACAA,KAAK,CAACW,MAAM,CAAC,CAAC,EAAEX,KAAK,CAACQ,MAAM,CAAC,CAAC,CAAC;IACjC;EACF;AACF,CAAC,CAAC;;AAEF,OAAO,MAAMM,WAAW,GAAGnB,SAAS,CAACoB,OAAO;AAC5C,eAAepB,SAAS,CAACqB,OAAO"},"metadata":{},"sourceType":"module"}