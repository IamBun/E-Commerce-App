{"ast":null,"code":"import Products from\"../homePage/Products\";import classes from\"./shopSearchDetail.module.css\";import{useSelector}from\"react-redux\";import{useEffect}from\"react\";import{useRef}from\"react\";import{useDispatch}from\"react-redux\";import{categoriesActions}from\"../../store/categories\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ShopSearchDetail=function ShopSearchDetail(){var categoriesInputRef=useRef();//nhan gia tri nhap vao\nvar dispatch=useDispatch();var navigate=useNavigate();var data=useSelector(function(state){return state.data.currentData;});// lay data tu store\nuseEffect(function(){dispatch(categoriesActions.getCategories(data));},[data]);//lan dau tai trang thi lay data, khi data thay doi thi tai lai\nvar searchCategoryHandler=function searchCategoryHandler(){var enteredInputRef=categoriesInputRef.current.value.toLowerCase();//lay gia tri tu input, khong viet hoa\nvar categoryArr=data.filter(//tao mang moi lay tu mang data sao cho category trung voi category nhap tu input\nfunction(ele){return ele.category===enteredInputRef;});dispatch(categoriesActions.getCategories(categoryArr));//goi len store luu mang category de hien thi\n};var categorySearch=useSelector(function(state){return state.categories.categories;});// lay mang category tu store, da duoc danh gia lai\nvar showDetailHandler=function showDetailHandler(index){//khi click thi chuyen den trang detail san pham\nvar idDetail=categorySearch[index]._id.$oid;//lay id cua san pham\nnavigate(\"/detail/\".concat(idDetail));};return/*#__PURE__*/_jsxs(\"div\",{className:classes.shopSearchDetail,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Search Here ! \",ref:categoriesInputRef}),/*#__PURE__*/_jsx(\"button\",{onClick:searchCategoryHandler,children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.searchDetail,children:categorySearch.length>0?categorySearch.map(function(ele,index){return/*#__PURE__*/_jsx(Products,{item:ele,click:showDetailHandler,index:index},index);}):/*#__PURE__*/ // khong tim duoc san pham\n_jsx(\"h1\",{children:\"No result !\"})})]});};export default ShopSearchDetail;","map":{"version":3,"names":["Products","classes","useSelector","useEffect","useRef","useDispatch","categoriesActions","useNavigate","ShopSearchDetail","categoriesInputRef","dispatch","navigate","data","state","currentData","getCategories","searchCategoryHandler","enteredInputRef","current","value","toLowerCase","categoryArr","filter","ele","category","categorySearch","categories","showDetailHandler","index","idDetail","_id","$oid","shopSearchDetail","searchDetail","length","map"],"sources":["E:/UDEMY LAB/PROJECT/E-Commerce/src/components/shopPage/ShopSearchDetail.js"],"sourcesContent":["import Products from \"../homePage/Products\";\r\nimport classes from \"./shopSearchDetail.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { categoriesActions } from \"../../store/categories\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst ShopSearchDetail = () => {\r\n  const categoriesInputRef = useRef(); //nhan gia tri nhap vao\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const data = useSelector((state) => state.data.currentData); // lay data tu store\r\n\r\n  useEffect(() => {\r\n    dispatch(categoriesActions.getCategories(data));\r\n  }, [data]); //lan dau tai trang thi lay data, khi data thay doi thi tai lai\r\n\r\n  const searchCategoryHandler = () => {\r\n    const enteredInputRef = categoriesInputRef.current.value.toLowerCase(); //lay gia tri tu input, khong viet hoa\r\n    let categoryArr = data.filter(\r\n      //tao mang moi lay tu mang data sao cho category trung voi category nhap tu input\r\n      (ele) => ele.category === enteredInputRef\r\n    );\r\n\r\n    dispatch(categoriesActions.getCategories(categoryArr)); //goi len store luu mang category de hien thi\r\n  };\r\n\r\n  const categorySearch = useSelector((state) => state.categories.categories); // lay mang category tu store, da duoc danh gia lai\r\n\r\n  const showDetailHandler = (index) => {\r\n    //khi click thi chuyen den trang detail san pham\r\n    const idDetail = categorySearch[index]._id.$oid; //lay id cua san pham\r\n    navigate(`/detail/${idDetail}`);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.shopSearchDetail}>\r\n      <div>\r\n        <input\r\n          placeholder=\"Enter Search Here ! \"\r\n          ref={categoriesInputRef}\r\n        ></input>\r\n        <button onClick={searchCategoryHandler}>Search</button>\r\n        {/* <button>Sort</button> */}\r\n      </div>\r\n      <div className={classes.searchDetail}>\r\n        {/* Tim duoc san pham phu hop  */}\r\n        {categorySearch.length > 0 ? (\r\n          categorySearch.map((ele, index) => (\r\n            <Products\r\n              key={index}\r\n              item={ele}\r\n              click={showDetailHandler}\r\n              index={index}\r\n            />\r\n          ))\r\n        ) : (\r\n          // khong tim duoc san pham\r\n          <h1>No result !</h1>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ShopSearchDetail;\r\n"],"mappings":"AAAA,MAAOA,SAAQ,KAAM,sBAAsB,CAC3C,MAAOC,QAAO,KAAM,+BAA+B,CACnD,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,MAAM,KAAQ,OAAO,CAC9B,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,iBAAiB,KAAQ,wBAAwB,CAC1D,OAASC,WAAW,KAAQ,kBAAkB,CAAC,wFAE/C,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,EAAS,CAC7B,GAAMC,mBAAkB,CAAGL,MAAM,EAAE,CAAE;AACrC,GAAMM,SAAQ,CAAGL,WAAW,EAAE,CAC9B,GAAMM,SAAQ,CAAGJ,WAAW,EAAE,CAE9B,GAAMK,KAAI,CAAGV,WAAW,CAAC,SAACW,KAAK,QAAKA,MAAK,CAACD,IAAI,CAACE,WAAW,GAAC,CAAE;AAE7DX,SAAS,CAAC,UAAM,CACdO,QAAQ,CAACJ,iBAAiB,CAACS,aAAa,CAACH,IAAI,CAAC,CAAC,CACjD,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAAE;AAEZ,GAAMI,sBAAqB,CAAG,QAAxBA,sBAAqB,EAAS,CAClC,GAAMC,gBAAe,CAAGR,kBAAkB,CAACS,OAAO,CAACC,KAAK,CAACC,WAAW,EAAE,CAAE;AACxE,GAAIC,YAAW,CAAGT,IAAI,CAACU,MAAM,CAC3B;AACA,SAACC,GAAG,QAAKA,IAAG,CAACC,QAAQ,GAAKP,eAAe,GAC1C,CAEDP,QAAQ,CAACJ,iBAAiB,CAACS,aAAa,CAACM,WAAW,CAAC,CAAC,CAAE;AAC1D,CAAC,CAED,GAAMI,eAAc,CAAGvB,WAAW,CAAC,SAACW,KAAK,QAAKA,MAAK,CAACa,UAAU,CAACA,UAAU,GAAC,CAAE;AAE5E,GAAMC,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIC,KAAK,CAAK,CACnC;AACA,GAAMC,SAAQ,CAAGJ,cAAc,CAACG,KAAK,CAAC,CAACE,GAAG,CAACC,IAAI,CAAE;AACjDpB,QAAQ,mBAAYkB,QAAQ,EAAG,CACjC,CAAC,CAED,mBACE,aAAK,SAAS,CAAE5B,OAAO,CAAC+B,gBAAiB,wBACvC,oCACE,cACE,WAAW,CAAC,sBAAsB,CAClC,GAAG,CAAEvB,kBAAmB,EACjB,cACT,eAAQ,OAAO,CAAEO,qBAAsB,oBAAgB,GAEnD,cACN,YAAK,SAAS,CAAEf,OAAO,CAACgC,YAAa,UAElCR,cAAc,CAACS,MAAM,CAAG,CAAC,CACxBT,cAAc,CAACU,GAAG,CAAC,SAACZ,GAAG,CAAEK,KAAK,qBAC5B,KAAC,QAAQ,EAEP,IAAI,CAAEL,GAAI,CACV,KAAK,CAAEI,iBAAkB,CACzB,KAAK,CAAEC,KAAM,EAHRA,KAAK,CAIV,EACH,CAAC,eAEF;AACA,mCACD,EACG,GACF,CAEV,CAAC,CACD,cAAepB,iBAAgB"},"metadata":{},"sourceType":"module"}